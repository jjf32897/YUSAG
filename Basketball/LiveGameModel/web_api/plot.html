<!doctype html>
<meta charset="utf-8">

<style>
.plot {
  width: 800px;
  height: 400px;
}
</style>

<script src="https://d3plus.org/js/d3.js"></script>
<script src="https://d3plus.org/js/d3plus.js"></script>

<!-- create container element for visualization -->
<div id="container"></div>

<script>

    d3.json("https://nbamodel.herokuapp.com/games", function(game_ids) {
      for (var i = 0; i < game_ids.length; i++) {
        var game_id = game_ids[i]["gameid"];

        d3.select("#container")
          .append("div")
            .attr("id", "viz" + game_id)
            .attr("class", "plot");

        d3.json("https://nbamodel.herokuapp.com/" + game_id, function(data) {
          // instantiate d3plus
          visualization = d3plus.viz()
            .container("#viz" + data["gameid"]) 
            .data(data["data"])  // data to use with the visualization
            .id("id")
            .type("line")       // visualization type
            .text("desc")       // key to use for display text
            .y("value")         // key to use for y-axis
            .x("time")          // key to use for x-axis
            .x({"grid": false, "range": [0, 2880]})
            .title(game_id[i]["desc"])
            .draw()             // finally, draw the visualization!
        })
      }
    });


</script>
